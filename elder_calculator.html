<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello Silver - ì–´ë¥´ì‹  ë³µì§€ ì§€ì› ì§„ë‹¨</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .site-header {
            background-color: #13547a;
            color: white;
            padding: 10px 0;
            font-size: 14px;
        }
        
        .navbar-brand img {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }
        
        .custom-btn {
            background-color: #80d0c7;
            border-color: #80d0c7;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
        }
        
        .custom-btn:hover {
            background-color: #13547a;
            border-color: #13547a;
        }
        
        .question-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 25px;
            overflow: hidden;
        }
        
        .question-header {
            background: linear-gradient(135deg, #13547a 0%, #80d0c7 100%);
            color: white;
            padding: 20px;
            margin: 0;
        }
        
        .option-label {
            display: block;
            cursor: pointer;
            padding: 15px 20px;
            margin: 5px 0;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .option-label:hover {
            background: #e3f2fd;
            border-color: #80d0c7;
        }
        
        .option-label input:checked + span {
            color: #13547a;
            font-weight: 600;
        }
        
        .option-label:has(input:checked) {
            background: #e8f5e8;
            border-color: #80d0c7;
        }
        
        .results-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
            padding: 30px;
            margin-top: 30px;
        }
        
        .welfare-item {
            background: #f8f9fa;
            border-left: 4px solid #80d0c7;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 0 10px 10px 0;
        }
        
        .priority-high { border-left-color: #dc3545; }
        .priority-medium { border-left-color: #ffc107; }
        .priority-low { border-left-color: #28a745; }
        
        .score-display {
            background: linear-gradient(135deg, #13547a 0%, #80d0c7 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 25px;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="row">                    
                <div class="col-lg-8 col-12 d-flex flex-wrap">
                    <p class="d-flex me-4 mb-0">
                        <i class="bi-geo-alt me-2"></i>
                        <strong>íš¨ì„±ì—¬ìê³ ë“±í•™êµ</strong>
                    </p>
                    <p class="d-flex mb-0">
                        <i class="bi-envelope me-2"></i>
                        <a href="mailto:team.ddasum.care@gmail.com" class="text-white text-decoration-none">
                            team.ddasum.care@gmail.com
                        </a>
                    </p>
                </div>
                <div class="col-lg-3 col-12 ms-auto d-lg-block d-none">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item"><a href="#" class="text-white"><i class="bi-twitter"></i></a></li>
                        <li class="list-inline-item"><a href="#" class="text-white"><i class="bi-facebook"></i></a></li>
                        <li class="list-inline-item"><a href="#" class="text-white"><i class="bi-instagram"></i></a></li>
                        <li class="list-inline-item"><a href="#" class="text-white"><i class="bi-youtube"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <nav class="navbar navbar-expand-lg bg-light shadow-lg">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="images/logo.png" alt="Hello Silver">
                <span>
                    Hello Silver
                    <small class="d-block">íš¨ì„±ì—¬ê³  í•™ìƒì´ ë§Œë“œëŠ” ë‚˜ëˆ”</small>
                </span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="purpose.html">ì„¤ë¦½ëª©ì </a></li>
                    <li class="nav-item"><a class="nav-link" href="#section_3">Causes</a></li>
                    <li class="nav-item"><a class="nav-link active" href="elder_calculator.html">ë…¸ì¸ë³µì§€ì ìˆ˜ê³„ì‚°ê¸°</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">News</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="news.html">ê±´ê°• ì •ë³´</a></li>
                            <li><a class="dropdown-item" href="news-detail.html">ì§€ì—­ë³„ ì„œë¹„ìŠ¤ ì•ˆë‚´</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#section_6">ì—°ë½ë§</a></li>
                    <li class="nav-item"><a class="nav-link" href="minigame.html">ë¯¸ë‹ˆê²Œì„</a></li>
                    <li class="nav-item ms-3"><a class="nav-link custom-btn btn" href="donate.html">ê¸°ë¶€</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary mb-3">ì–´ë¥´ì‹  ë§ì¶¤í˜• ë³µì§€ ì§„ë‹¨</h1>
            <p class="lead text-muted">ìƒì„¸í•œ ì§ˆë¬¸ì„ í†µí•´ ê°œì¸ë³„ ë§ì¶¤ ë³µì§€ ì„œë¹„ìŠ¤ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤</p>
            
            <!-- ë©”ì¸ ë²„íŠ¼ë“¤ -->
            <div class="d-flex justify-content-center gap-3 mb-4">
                <button type="button" class="btn custom-btn btn-lg px-4" id="openCalculatorBtn">
                    <i class="bi-calculator me-2"></i>ë³µì§€ì ìˆ˜ ê³„ì‚°í•˜ê¸°
                </button>
                <button type="button" class="btn btn-outline-primary btn-lg px-4" id="openHistoryBtn">
                    <i class="bi-bookmark-check me-2"></i>ì €ì¥í•œ ë³µì§€ì ìˆ˜ í™•ì¸í•˜ê¸°
                </button>
            </div>
        </div>

        <form id="welfareForm" style="display: none;">
            <!-- ê¸°ë³¸ ì •ë³´ -->
            <div class="question-card">
                <h3 class="question-header">ğŸ“‹ ê¸°ë³¸ ì •ë³´</h3>
                <div class="p-4">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">ì—°ë ¹ëŒ€</label>
                            <select name="age" class="form-select" required>
                                <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                <option value="65-69">65-69ì„¸</option>
                                <option value="70-74">70-74ì„¸</option>
                                <option value="75-79">75-79ì„¸</option>
                                <option value="80+">80ì„¸ ì´ìƒ</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">ê±°ì£¼ì§€ì—­</label>
                            <select name="region" class="form-select" required>
                                <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                <option value="seoul">ì„œìš¸íŠ¹ë³„ì‹œ</option>
                                <option value="busan">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
                                <option value="daegu">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
                                <option value="incheon">ì¸ì²œê´‘ì—­ì‹œ</option>
                                <option value="gwangju">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
                                <option value="daejeon">ëŒ€ì „ê´‘ì—­ì‹œ</option>
                                <option value="ulsan">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
                                <option value="sejong">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
                                <option value="gyeonggi">ê²½ê¸°ë„</option>
                                <option value="other">ê¸°íƒ€ ì§€ì—­</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì†Œë“ ë° ê²½ì œ ìƒí™© -->
            <div class="question-card">
                <h3 class="question-header">ğŸ’° ì†Œë“ ë° ê²½ì œ ìƒí™©</h3>
                <div class="p-4">
                    <div class="mb-4">
                        <label class="form-label fw-bold">ì›” ì†Œë“ ìˆ˜ì¤€</label>
                        <label class="option-label">
                            <input type="radio" name="income" value="basic" required>
                            <span>ì›” 30ë§Œì› ë¯¸ë§Œ (ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ ëŒ€ìƒ)</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="income" value="low" required>
                            <span>ì›” 30-80ë§Œì› (ì°¨ìƒìœ„ê³„ì¸µ)</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="income" value="medium-low" required>
                            <span>ì›” 80-120ë§Œì›</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="income" value="medium" required>
                            <span>ì›” 120-200ë§Œì›</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="income" value="stable" required>
                            <span>ì›” 200ë§Œì› ì´ìƒ</span>
                        </label>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold">ì˜ë£Œë¹„ ë¶€ë‹´ ì •ë„</label>
                        <label class="option-label">
                            <input type="radio" name="medical_cost" value="severe" required>
                            <span>ì˜ë£Œë¹„ë¡œ ì¸í•´ ìƒí™œì´ ë§¤ìš° ì–´ë ¤ì›€</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="medical_cost" value="high" required>
                            <span>ì˜ë£Œë¹„ ë¶€ë‹´ì´ í¼</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="medical_cost" value="manageable" required>
                            <span>ê°ë‹¹ ê°€ëŠ¥í•œ ìˆ˜ì¤€</span>
                        </label>
                    </div>

                    <div>
                        <label class="form-label fw-bold">êµ­ë¯¼ì—°ê¸ˆ ìˆ˜ê¸‰ ì—¬ë¶€</label>
                        <label class="option-label">
                            <input type="radio" name="pension" value="none" required>
                            <span>êµ­ë¯¼ì—°ê¸ˆ ë¯¸ê°€ì… ë˜ëŠ” ìˆ˜ê¸‰ì•¡ ì—†ìŒ</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="pension" value="low" required>
                            <span>ì›” 50ë§Œì› ë¯¸ë§Œ ìˆ˜ê¸‰</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="pension" value="adequate" required>
                            <span>ì›” 50ë§Œì› ì´ìƒ ìˆ˜ê¸‰</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ê±´ê°• ìƒíƒœ -->
            <div class="question-card">
                <h3 class="question-header">ğŸ¥ ê±´ê°• ìƒíƒœ</h3>
                <div class="p-4">
                    <div class="mb-4">
                        <label class="form-label fw-bold">ì¼ìƒìƒí™œ ìˆ˜í–‰ ëŠ¥ë ¥</label>
                        <label class="option-label">
                            <input type="radio" name="daily_living" value="dependent" required>
                            <span>ì „ì ìœ¼ë¡œ ë‹¤ë¥¸ ì‚¬ëŒì˜ ë„ì›€ì´ í•„ìš”</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="daily_living" value="partial" required>
                            <span>ë¶€ë¶„ì ì¸ ë„ì›€ì´ í•„ìš”</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="daily_living" value="independent" required>
                            <span>í˜¼ìì„œ ì¼ìƒìƒí™œ ê°€ëŠ¥</span>
                        </label>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold">ë§Œì„±ì§ˆí™˜ ë³´ìœ  í˜„í™©</label>
                        <label class="option-label">
                            <input type="radio" name="chronic_disease" value="multiple" required>
                            <span>3ê°œ ì´ìƒì˜ ë§Œì„±ì§ˆí™˜ ë³´ìœ </span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="chronic_disease" value="some" required>
                            <span>1-2ê°œì˜ ë§Œì„±ì§ˆí™˜ ë³´ìœ </span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="chronic_disease" value="none" required>
                            <span>ë§Œì„±ì§ˆí™˜ ì—†ìŒ</span>
                        </label>
                    </div>

                    <div>
                        <label class="form-label fw-bold">ì •ì‹ ê±´ê°• ìƒíƒœ</label>
                        <label class="option-label">
                            <input type="radio" name="mental_health" value="poor" required>
                            <span>ìš°ìš¸ê°, ë¶ˆì•ˆê°ì´ ì‹¬í•˜ì—¬ ì¼ìƒìƒí™œì— ì§€ì¥</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="mental_health" value="fair" required>
                            <span>ê°€ë” ìš°ìš¸í•˜ê±°ë‚˜ ë¶ˆì•ˆí•¨</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="mental_health" value="good" required>
                            <span>ì •ì‹ ì ìœ¼ë¡œ ê±´ê°•í•¨</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ì‚¬íšŒì  ê´€ê³„ -->
            <div class="question-card">
                <h3 class="question-header">ğŸ‘¥ ì‚¬íšŒì  ê´€ê³„ ë° ì§€ì§€ì²´ê³„</h3>
                <div class="p-4">
                    <div class="mb-4">
                        <label class="form-label fw-bold">ê°€ì¡± ê´€ê³„</label>
                        <label class="option-label">
                            <input type="radio" name="family" value="isolated" required>
                            <span>ë…ê±°ì´ë©° ê°€ì¡±ê³¼ì˜ ì—°ë½ì´ ê±°ì˜ ì—†ìŒ</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="family" value="limited" required>
                            <span>ê°€ì¡±ì´ ìˆì§€ë§Œ ìì£¼ ë§Œë‚˜ì§€ ëª»í•¨</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="family" value="supportive" required>
                            <span>ê°€ì¡±ê³¼ ì •ê¸°ì ìœ¼ë¡œ ë§Œë‚˜ë©° ì§€ì›ë°›ìŒ</span>
                        </label>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold">ì‚¬íšŒ í™œë™ ì°¸ì—¬</label>
                        <label class="option-label">
                            <input type="radio" name="social_activity" value="none" required>
                            <span>ì‚¬íšŒ í™œë™ì— ì „í˜€ ì°¸ì—¬í•˜ì§€ ì•ŠìŒ</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="social_activity" value="limited" required>
                            <span>ê°€ë” ê²½ë¡œë‹¹ì´ë‚˜ ë³µì§€ê´€ ì´ìš©</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="social_activity" value="active" required>
                            <span>ì •ê¸°ì ìœ¼ë¡œ ì‚¬íšŒ í™œë™ ì°¸ì—¬</span>
                        </label>
                    </div>

                    <div>
                        <label class="form-label fw-bold">ì‘ê¸‰ìƒí™© ì‹œ ë„ì›€ ìš”ì²­ ê°€ëŠ¥í•œ ì‚¬ëŒ</label>
                        <label class="option-label">
                            <input type="radio" name="emergency_support" value="none" required>
                            <span>ë„ì›€ ìš”ì²­í•  ì‚¬ëŒì´ ì—†ìŒ</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="emergency_support" value="limited" required>
                            <span>1-2ëª… ì •ë„ ìˆìŒ</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="emergency_support" value="adequate" required>
                            <span>ì—¬ëŸ¬ ëª…ì—ê²Œ ë„ì›€ ìš”ì²­ ê°€ëŠ¥</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- ì£¼ê±° í™˜ê²½ -->
            <div class="question-card">
                <h3 class="question-header">ğŸ  ì£¼ê±° í™˜ê²½</h3>
                <div class="p-4">
                    <div class="mb-4">
                        <label class="form-label fw-bold">ì£¼ê±° í˜•íƒœ</label>
                        <label class="option-label">
                            <input type="radio" name="housing_type" value="temporary" required>
                            <span>ìª½ë°©, ê³ ì‹œì›, ì„ì‹œê±°ì²˜</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="housing_type" value="rental" required>
                            <span>ì›”ì„¸ ë˜ëŠ” ì „ì„¸</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="housing_type" value="owned" required>
                            <span>ìê°€ ì†Œìœ </span>
                        </label>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold">ì£¼ê±°ë¹„ ë¶€ë‹´</label>
                        <label class="option-label">
                            <input type="radio" name="housing_cost" value="excessive" required>
                            <span>ì†Œë“ì˜ 50% ì´ìƒ</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="housing_cost" value="high" required>
                            <span>ì†Œë“ì˜ 30-50%</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="housing_cost" value="manageable" required>
                            <span>ì†Œë“ì˜ 30% ë¯¸ë§Œ</span>
                        </label>
                    </div>

                    <div>
                        <label class="form-label fw-bold">ì£¼ê±° í™˜ê²½ì˜ ì•ˆì „ì„±</label>
                        <label class="option-label">
                            <input type="radio" name="housing_safety" value="unsafe" required>
                            <span>ë…¸í›„í™”ë˜ì–´ ìœ„í—˜í•˜ê³  í¸ì˜ì‹œì„¤ ë¶€ì¡±</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="housing_safety" value="fair" required>
                            <span>ë³´í†µ ìˆ˜ì¤€</span>
                        </label>
                        <label class="option-label">
                            <input type="radio" name="housing_safety" value="safe" required>
                            <span>ì•ˆì „í•˜ê³  í¸ë¦¬í•¨</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn custom-btn btn-lg px-5 py-3">
                    <i class="bi-calculator me-2"></i>ë§ì¶¤í˜• ë³µì§€ ì„œë¹„ìŠ¤ ì§„ë‹¨í•˜ê¸°
                </button>
                <button type="button" class="btn btn-success btn-lg px-5 py-3 ms-3" id="saveResultBtn" style="display: none;">
                    <i class="bi-bookmark-plus me-2"></i>ì§„ë‹¨ ê²°ê³¼ ì €ì¥í•˜ê¸°
                </button>
            </div>
        </form>

        <!-- ëª¨ë‹¬ í”„ë ˆì„ë“¤ -->
        <!-- ë³µì§€ì ìˆ˜ ê³„ì‚° ëª¨ë‹¬ -->
        <div class="modal fade" id="calculatorModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header bg-primary text-white">
                        <h5 class="modal-title">
                            <i class="bi-calculator me-2"></i>ë³µì§€ì ìˆ˜ ê³„ì‚°í•˜ê¸°
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div id="calculatorContent">
                            <!-- í¼ ë‚´ìš©ì´ ì—¬ê¸°ë¡œ ì´ë™ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì €ì¥ëœ ë³µì§€ì ìˆ˜ í™•ì¸ ëª¨ë‹¬ -->
        <div class="modal fade" id="historyModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header bg-success text-white">
                        <h5 class="modal-title">
                            <i class="bi-bookmark-check me-2"></i>ì €ì¥í•œ ë³µì§€ì ìˆ˜ í™•ì¸í•˜ê¸°
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div id="historyContent">
                            <!-- ì €ì¥ëœ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" id="clearHistoryBtn">
                            <i class="bi-trash me-2"></i>ì €ì¥ ë‚´ì—­ ì‚­ì œ
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <div id="results" class="results-section" style="display: none;">
            <div class="score-display">
                <h2 class="mb-3">ì§„ë‹¨ ê²°ê³¼</h2>
                <div id="riskLevel" class="h4 mb-2"></div>
                <p id="riskDescription" class="mb-0"></p>
            </div>

            <h3 class="text-primary mb-4">
                <i class="bi-heart-fill me-2"></i>ë§ì¶¤í˜• ë³µì§€ ì„œë¹„ìŠ¤ ì¶”ì²œ
            </h3>
            <div id="recommendedWelfare"></div>

            <div class="mt-4 p-4 bg-light rounded-3">
                <h5 class="text-primary mb-3">
                    <i class="bi-telephone-fill me-2"></i>ìƒë‹´ ë° ì‹ ì²­ ì•ˆë‚´
                </h5>
                <p class="mb-2"><strong>ì£¼ë¯¼ì„¼í„°:</strong> ê±°ì£¼ì§€ ê´€í•  ì£¼ë¯¼ì„¼í„°ì—ì„œ ëŒ€ë¶€ë¶„ì˜ ë³µì§€ ì„œë¹„ìŠ¤ ì‹ ì²­ ê°€ëŠ¥</p>
                <p class="mb-2"><strong>ë³´ê±´ë³µì§€ë¶€ ì½œì„¼í„°:</strong> 129 (ë¬´ë£Œìƒë‹´)</p>
                <p class="mb-0"><strong>êµ­ë¯¼ì—°ê¸ˆê³µë‹¨:</strong> 1355 (ê¸°ì´ˆì—°ê¸ˆ, ì¥ê¸°ìš”ì–‘ë³´í—˜ ê´€ë ¨)</p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // ë³µì§€ í”„ë¡œê·¸ë¨ ë°ì´í„°ë² ì´ìŠ¤
        const welfareDatabase = {
            // ê¸°ì´ˆìƒí™œë³´ì¥ ê´€ë ¨
            basic_living: {
                name: "ê¸°ì´ˆìƒí™œë³´ì¥ì œë„",
                description: "ìƒê³„ê¸‰ì—¬, ì˜ë£Œê¸‰ì—¬, ì£¼ê±°ê¸‰ì—¬, êµìœ¡ê¸‰ì—¬ë¥¼ í†µí•´ ìµœì €ìƒí™œì„ ë³´ì¥í•©ë‹ˆë‹¤.",
                priority: "high",
                application: "ê±°ì£¼ì§€ ê´€í•  ì£¼ë¯¼ì„¼í„°",
                conditions: ["ì†Œë“ì¸ì •ì•¡ì´ ê¸‰ì—¬ë³„ ì„ ì •ê¸°ì¤€ ì´í•˜", "ë¶€ì–‘ì˜ë¬´ì ê¸°ì¤€ ì¶©ì¡±"]
            },
            
            basic_pension: {
                name: "ê¸°ì´ˆì—°ê¸ˆ",
                description: "ë§Œ 65ì„¸ ì´ìƒ ì†Œë“ í•˜ìœ„ 70% ì–´ë¥´ì‹ ì—ê²Œ ì›” ìµœëŒ€ 334,810ì› ì§€ê¸‰ (2024ë…„ ê¸°ì¤€)",
                priority: "high",
                application: "ì£¼ë¯¼ì„¼í„° ë˜ëŠ” êµ­ë¯¼ì—°ê¸ˆê³µë‹¨",
                conditions: ["ë§Œ 65ì„¸ ì´ìƒ", "ì†Œë“ì¸ì •ì•¡ ê¸°ì¤€ ì¶©ì¡±"]
            },

            housing_support: {
                name: "ì£¼ê±°ê¸‰ì—¬",
                description: "ì†Œë“ í•˜ìœ„ 47% ê³„ì¸µì—ê²Œ ì„ì°¨ë£Œ ë˜ëŠ” ìˆ˜ì„ ìœ ì§€ë¹„ ì§€ì›",
                priority: "high",
                application: "ê±°ì£¼ì§€ ê´€í•  ì£¼ë¯¼ì„¼í„°",
                conditions: ["ì†Œë“ì¸ì •ì•¡ì´ ê¸°ì¤€ ì¤‘ìœ„ì†Œë“ 47% ì´í•˜"]
            },

            medical_support: {
                name: "ì˜ë£Œê¸‰ì—¬",
                description: "ì˜ë£Œë¹„ ë³¸ì¸ë¶€ë‹´ê¸ˆ ê²½ê° ë˜ëŠ” ë©´ì œ",
                priority: "high",
                application: "ê±°ì£¼ì§€ ê´€í•  ì£¼ë¯¼ì„¼í„°",
                conditions: ["ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ì", "ì°¨ìƒìœ„ê³„ì¸µ"]
            },

            // ê±´ê°• ê´€ë ¨
            long_term_care: {
                name: "ë…¸ì¸ì¥ê¸°ìš”ì–‘ë³´í—˜",
                description: "ì‹ ì²´í™œë™, ê°€ì‚¬í™œë™ ì§€ì› ë“± ì¥ê¸°ìš”ì–‘ì„œë¹„ìŠ¤ ì œê³µ",
                priority: "high",
                application: "êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨",
                conditions: ["ë§Œ 65ì„¸ ì´ìƒ ë˜ëŠ” 65ì„¸ ë¯¸ë§Œ ë…¸ì¸ì„± ì§ˆë³‘ì", "ì¥ê¸°ìš”ì–‘ì¸ì • ì‹ ì²­ ë° ë“±ê¸‰ íŒì •"]
            },

            customized_care: {
                name: "ë…¸ì¸ë§ì¶¤ëŒë´„ì„œë¹„ìŠ¤",
                description: "ì•ˆì „í™•ì¸, ìƒí™œêµìœ¡, ì„œë¹„ìŠ¤ì—°ê³„, ìƒí™œì§€ì› ë“± ë§ì¶¤í˜• ì„œë¹„ìŠ¤",
                priority: "high",
                application: "ì‹œêµ°êµ¬ì²­ ë˜ëŠ” ìˆ˜í–‰ê¸°ê´€",
                conditions: ["ë§Œ 65ì„¸ ì´ìƒ", "êµ­ê°€ë³´í›ˆëŒ€ìƒìëŠ” ë³´í›ˆì²­ ìŠ¹ì¸"]
            },

            home_healthcare: {
                name: "ë°©ë¬¸ê±´ê°•ê´€ë¦¬ì„œë¹„ìŠ¤",
                description: "ë³´ê±´ì†Œ ê°„í˜¸ì‚¬ê°€ ê°€ì •ë°©ë¬¸í•˜ì—¬ ê±´ê°•ê´€ë¦¬ ì„œë¹„ìŠ¤ ì œê³µ",
                priority: "medium",
                application: "ê±°ì£¼ì§€ ê´€í•  ë³´ê±´ì†Œ",
                conditions: ["ê±´ê°•ê´€ë¦¬ê°€ í•„ìš”í•œ ê°€ì •", "ì˜ë£Œì·¨ì•½ê³„ì¸µ ìš°ì„ "]
            },

            dementia_center: {
                name: "ì¹˜ë§¤ì•ˆì‹¬ì„¼í„° ì„œë¹„ìŠ¤",
                description: "ì¹˜ë§¤ ê²€ì§„, ìƒë‹´, ì¹˜ë§¤í™˜ì ë° ê°€ì¡± ì§€ì› í”„ë¡œê·¸ë¨",
                priority: "medium",
                application: "ê±°ì£¼ì§€ ê´€í•  ì¹˜ë§¤ì•ˆì‹¬ì„¼í„°",
                conditions: ["ë§Œ 60ì„¸ ì´ìƒ", "ì¹˜ë§¤ ê³ ìœ„í—˜êµ° ë˜ëŠ” ì¹˜ë§¤í™˜ì"]
            },

            // ì‚¬íšŒì°¸ì—¬ ê´€ë ¨
            senior_job: {
                name: "ë…¸ì¸ì¼ìë¦¬ ë° ì‚¬íšŒí™œë™ ì§€ì›ì‚¬ì—…",
                description: "ê³µìµí™œë™, ì‚¬íšŒì„œë¹„ìŠ¤í˜•, ì‹œì¥í˜•, ì·¨ì—…ì•Œì„ í˜• ì¼ìë¦¬ ì œê³µ",
                priority: "medium",
                application: "ì‹œë‹ˆì–´í´ëŸ½, ë…¸ì¸ë³µì§€ê´€ ë“±",
                conditions: ["ë§Œ 65ì„¸ ì´ìƒ", "ì‚¬ì—… ìœ í˜•ë³„ ì¡°ê±´ ìƒì´"]
            },

            social_program: {
                name: "ë…¸ì¸ë³µì§€ê´€ í”„ë¡œê·¸ë¨",
                description: "ì—¬ê°€ë¬¸í™”, í‰ìƒêµìœ¡, ì‚¬íšŒì°¸ì—¬ í”„ë¡œê·¸ë¨ ì œê³µ",
                priority: "medium",
                application: "ê±°ì£¼ì§€ ì¸ê·¼ ë…¸ì¸ë³µì§€ê´€",
                conditions: ["ë§Œ 60ì„¸ ì´ìƒ"]
            },

            // ì‘ê¸‰ ë° íŠ¹ìˆ˜ ì§€ì›
            emergency_support: {
                name: "ê¸´ê¸‰ë³µì§€ì§€ì›",
                description: "ìœ„ê¸°ìƒí™© ë°œìƒì‹œ ìƒê³„ë¹„, ì˜ë£Œë¹„, ì£¼ê±°ë¹„ ë“± ê¸´ê¸‰ ì§€ì›",
                priority: "high",
                application: "ì‹œêµ°êµ¬ì²­, ì£¼ë¯¼ì„¼í„°, ë³´ê±´ë³µì§€ë¶€ ì½œì„¼í„° 129",
                conditions: ["ê°‘ì‘ìŠ¤ëŸ¬ìš´ ìœ„ê¸°ìƒí™© ë°œìƒ", "ì†Œë“ ë° ì¬ì‚° ê¸°ì¤€ ì¶©ì¡±"]
            },

            alone_elderly: {
                name: "ë…ê±°ë…¸ì¸ ì‘ê¸‰ì•ˆì „ì•Œë¦¼ì„œë¹„ìŠ¤",
                description: "ì‘ê¸‰ìƒí™© ì‹œ ìë™ ì‹ ê³ ë˜ëŠ” ì‘ê¸‰ì•ˆì „ì¥ì¹˜ ì„¤ì¹˜",
                priority: "high",
                application: "ê±°ì£¼ì§€ ê´€í•  ì£¼ë¯¼ì„¼í„°",
                conditions: ["ë§Œ 65ì„¸ ì´ìƒ ë…ê±°ë…¸ì¸", "ê¸°ì´ˆìƒí™œìˆ˜ê¸‰ì ë˜ëŠ” ì°¨ìƒìœ„ê³„ì¸µ"]
            },

            // êµìœ¡ ë° ì—¬ê°€
            lifelong_education: {
                name: "í‰ìƒêµìœ¡ í”„ë¡œê·¸ë¨",
                description: "ì·¨ë¯¸, ê±´ê°•, êµì–‘ ë“± ë‹¤ì–‘í•œ í‰ìƒí•™ìŠµ í”„ë¡œê·¸ë¨",
                priority: "low",
                application: "í‰ìƒí•™ìŠµê´€, ë…¸ì¸ë³µì§€ê´€",
                conditions: ["í”„ë¡œê·¸ë¨ë³„ ì—°ë ¹ ì¡°ê±´ ìƒì´", "ê±°ì£¼ì§€ ì œí•œ ì—†ìŒ"]
            },

            volunteer_program: {
                name: "ìì›ë´‰ì‚¬ í”„ë¡œê·¸ë¨",
                description: "ì–´ë¥´ì‹  ëŒ€ìƒ ë§ì¶¤í˜• ìì›ë´‰ì‚¬ í™œë™ ë° êµìœ¡ í”„ë¡œê·¸ë¨",
                priority: "low",
                application: "ìì›ë´‰ì‚¬ì„¼í„°, ë…¸ì¸ë³µì§€ê´€",
                conditions: ["ìì›ë´‰ì‚¬ ì˜ì§€ê°€ ìˆëŠ” ì–´ë¥´ì‹ ", "ê±´ê°•ìƒíƒœ ì–‘í˜¸"]
            }
        };

        // localStorage ê´€ë ¨ í•¨ìˆ˜ë“¤
        function saveToLocalStorage(data, riskLevel, recommendations) {
            const saveData = {
                timestamp: new Date().toISOString(),
                formData: data,
                riskLevel: riskLevel,
                recommendations: recommendations,
                id: Date.now() // ê³ ìœ  ID
            };
            
            // ê¸°ì¡´ ì €ì¥ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            let savedData = JSON.parse(localStorage.getItem('welfareHistory') || '[]');
            
            // ìƒˆ ë°ì´í„° ì¶”ê°€ (ìµœëŒ€ 10ê°œë§Œ ì €ì¥)
            savedData.unshift(saveData);
            if (savedData.length > 10) {
                savedData = savedData.slice(0, 10);
            }
            
            localStorage.setItem('welfareHistory', JSON.stringify(savedData));
            alert('ì§„ë‹¨ ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        function loadFromLocalStorage() {
            return JSON.parse(localStorage.getItem('welfareHistory') || '[]');
        }
        
        function clearLocalStorage() {
            if (confirm('ì €ì¥ëœ ëª¨ë“  ë³µì§€ì ìˆ˜ ë‚´ì—­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('welfareHistory');
                displayHistory();
                alert('ì €ì¥ ë‚´ì—­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function openCalculatorModal() {
            const modal = new bootstrap.Modal(document.getElementById('calculatorModal'));
            const calculatorContent = document.getElementById('calculatorContent');
            const welfareForm = document.getElementById('welfareForm');
            
            // í¼ì„ ëª¨ë‹¬ë¡œ ì´ë™
            calculatorContent.appendChild(welfareForm);
            welfareForm.style.display = 'block';
            
            modal.show();
        }
        
        function openHistoryModal() {
            const modal = new bootstrap.Modal(document.getElementById('historyModal'));
            displayHistory();
            modal.show();
        }
        
        function displayHistory() {
            const historyContent = document.getElementById('historyContent');
            const savedData = loadFromLocalStorage();
            
            if (savedData.length === 0) {
                historyContent.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi-bookmark-x display-1 text-muted"></i>
                        <h4 class="text-muted mt-3">ì €ì¥ëœ ë³µì§€ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤</h4>
                        <p class="text-muted">ë¨¼ì € ë³µì§€ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ê³  ì €ì¥í•´ë³´ì„¸ìš”.</p>
                    </div>
                `;
                return;
            }
            
            let historyHTML = '';
            
            savedData.forEach((item, index) => {
                const date = new Date(item.timestamp);
                const formattedDate = date.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const riskMessages = {
                    'critical': { level: 'ğŸš¨ ê¸´ê¸‰ ì§€ì› í•„ìš”', color: 'danger' },
                    'high': { level: 'âš ï¸ ë†’ì€ ìœ„í—˜ë„', color: 'warning' },
                    'medium': { level: 'ğŸ”¶ ì¤‘ê°„ ìœ„í—˜ë„', color: 'info' },
                    'low': { level: 'âœ… ì•ˆì •ì ', color: 'success' }
                };
                
                const riskInfo = riskMessages[item.riskLevel];
                
                historyHTML += `
                    <div class="card mb-4">
                        <div class="card-header bg-light">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="bi-calendar3 me-2"></i>${formattedDate}
                                </h6>
                                <span class="badge bg-${riskInfo.color}">${riskInfo.level}</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <h6 class="text-primary">ğŸ“‹ ì§„ë‹¨ ì •ë³´</h6>
                                    <p class="small mb-1"><strong>ì—°ë ¹ëŒ€:</strong> ${getFormDataLabel('age', item.formData.age)}</p>
                                    <p class="small mb-1"><strong>ê±°ì£¼ì§€ì—­:</strong> ${getFormDataLabel('region', item.formData.region)}</p>
                                    <p class="small mb-1"><strong>ì†Œë“ìˆ˜ì¤€:</strong> ${getFormDataLabel('income', item.formData.income)}</p>
                                    <p class="small mb-0"><strong>ê±´ê°•ìƒíƒœ:</strong> ${getFormDataLabel('daily_living', item.formData.daily_living)}</p>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="text-success">ğŸ¥ ì¶”ì²œ ë³µì§€ì„œë¹„ìŠ¤ (${item.recommendations.length}ê°œ)</h6>
                                    <ul class="small mb-0">
                                        ${item.recommendations.slice(0, 3).map(rec => 
                                            `<li>${rec.name}</li>`
                                        ).join('')}
                                        ${item.recommendations.length > 3 ? `<li class="text-muted">ì™¸ ${item.recommendations.length - 3}ê°œ ë”...</li>` : ''}
                                    </ul>
                                </div>
                            </div>
                            <button class="btn btn-sm btn-outline-primary" onclick="showDetailHistory(${index})">
                                <i class="bi-eye me-1"></i>ìƒì„¸ ë³´ê¸°
                            </button>
                        </div>
                    </div>
                `;
            });
            
            historyContent.innerHTML = historyHTML;
        }
        
        // í¼ ë°ì´í„° ë¼ë²¨ ë³€í™˜ í•¨ìˆ˜
        function getFormDataLabel(fieldName, value) {
            const labels = {
                age: {
                    '65-69': '65-69ì„¸',
                    '70-74': '70-74ì„¸', 
                    '75-79': '75-79ì„¸',
                    '80+': '80ì„¸ ì´ìƒ'
                },
                region: {
                    'seoul': 'ì„œìš¸íŠ¹ë³„ì‹œ',
                    'busan': 'ë¶€ì‚°ê´‘ì—­ì‹œ',
                    'daegu': 'ëŒ€êµ¬ê´‘ì—­ì‹œ',
                    'other': 'ê¸°íƒ€ ì§€ì—­'
                },
                income: {
                    'basic': 'ì›” 30ë§Œì› ë¯¸ë§Œ (ê¸°ì´ˆìƒí™œìˆ˜ê¸‰)',
                    'low': 'ì›” 30-80ë§Œì› (ì°¨ìƒìœ„ê³„ì¸µ)',
                    'medium-low': 'ì›” 80-120ë§Œì›',
                    'medium': 'ì›” 120-200ë§Œì›',
                    'stable': 'ì›” 200ë§Œì› ì´ìƒ'
                },
                daily_living: {
                    'dependent': 'ì „ì ìœ¼ë¡œ ë„ì›€ í•„ìš”',
                    'partial': 'ë¶€ë¶„ì  ë„ì›€ í•„ìš”',
                    'independent': 'í˜¼ìì„œ ìƒí™œ ê°€ëŠ¥'
                }
            };
            
            return labels[fieldName]?.[value] || value;
        }
        
        // ìƒì„¸ ë‚´ì—­ í‘œì‹œ í•¨ìˆ˜
        function showDetailHistory(index) {
            const savedData = loadFromLocalStorage();
            const item = savedData[index];
            
            if (!item) return;
            
            // ìƒˆ ëª¨ë‹¬ ì°½ìœ¼ë¡œ ìƒì„¸ ì •ë³´ í‘œì‹œ
            const detailModal = document.createElement('div');
            detailModal.className = 'modal fade';
            detailModal.innerHTML = `
                <div class="modal-dialog modal-lg modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header bg-info text-white">
                            <h5 class="modal-title">
                                <i class="bi-file-text me-2"></i>ìƒì„¸ ì§„ë‹¨ ê²°ê³¼
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            ${generateDetailHTML(item)}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(detailModal);
            const modal = new bootstrap.Modal(detailModal);
            modal.show();
            
            // ëª¨ë‹¬ì´ ë‹«í ë•Œ DOMì—ì„œ ì œê±°
            detailModal.addEventListener('hidden.bs.modal', () => {
                document.body.removeChild(detailModal);
            });
        }
        
        function generateDetailHTML(item) {
            const date = new Date(item.timestamp);
            const formattedDate = date.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const riskMessages = {
                'critical': { level: 'ğŸš¨ ê¸´ê¸‰ ì§€ì› í•„ìš”', description: 'ë³µí•©ì ì¸ ì–´ë ¤ì›€ì„ ê²ªê³  ê³„ì‹­ë‹ˆë‹¤. ì¦‰ì‹œ ì „ë¬¸ ìƒë‹´ì„ ë°›ìœ¼ì‹œê¸° ë°”ëë‹ˆë‹¤.' },
                'high': { level: 'âš ï¸ ë†’ì€ ìœ„í—˜ë„', description: 'ì—¬ëŸ¬ ì˜ì—­ì—ì„œ ì§€ì›ì´ í•„ìš”í•©ë‹ˆë‹¤. ì ê·¹ì ì¸ ë³µì§€ ì„œë¹„ìŠ¤ ì´ìš©ì„ ê¶Œí•©ë‹ˆë‹¤.' },
                'medium': { level: 'ğŸ”¶ ì¤‘ê°„ ìœ„í—˜ë„', description: 'ì¼ë¶€ ì˜ì—­ì—ì„œ ì§€ì›ì´ ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.' },
                'low': { level: 'âœ… ì•ˆì •ì ', description: 'ë¹„êµì  ì•ˆì •ì ì¸ ìƒíƒœì…ë‹ˆë‹¤. ì˜ˆë°©ì  ì„œë¹„ìŠ¤ ì´ìš©ì„ ê¶Œí•©ë‹ˆë‹¤.' }
            };
            
            const riskInfo = riskMessages[item.riskLevel];
            
            let html = `
                <div class="mb-4">
                    <h6 class="text-muted">ì§„ë‹¨ ì¼ì‹œ: ${formattedDate}</h6>
                </div>
                
                <div class="score-display mb-4">
                    <h4>${riskInfo.level}</h4>
                    <p class="mb-0">${riskInfo.description}</p>
                </div>
                
                <h5 class="text-primary mb-3">
                    <i class="bi-heart-fill me-2"></i>ë§ì¶¤í˜• ë³µì§€ ì„œë¹„ìŠ¤ ì¶”ì²œ (${item.recommendations.length}ê°œ)
                </h5>
            `;
            
            item.recommendations.forEach(program => {
                const priorityClass = `priority-${program.priority}`;
                const priorityText = {
                    'high': 'ğŸ”´ ìš°ì„  ì‹ ì²­',
                    'medium': 'ğŸŸ¡ ê¶Œì¥ ì„œë¹„ìŠ¤', 
                    'low': 'ğŸŸ¢ ì°¸ê³  ì„œë¹„ìŠ¤'
                };
                
                html += `
                    <div class="welfare-item ${priorityClass} mb-3">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h6 class="text-primary mb-1">${program.name}</h6>
                            <span class="badge bg-secondary">${priorityText[program.priority]}</span>
                        </div>
                        <p class="text-dark mb-2">${program.description}</p>
                        <div class="row">
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="bi-building me-1"></i><strong>ì‹ ì²­ì²˜:</strong> ${program.application}
                                </small>
                            </div>
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="bi-check-circle me-1"></i><strong>ì¡°ê±´:</strong> ${program.conditions.join(', ')}
                                </small>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            return html;
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
        document.addEventListener('DOMContentLoaded', function() {
            // ë©”ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('openCalculatorBtn').addEventListener('click', openCalculatorModal);
            document.getElementById('openHistoryBtn').addEventListener('click', openHistoryModal);
            
            // ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('saveResultBtn').addEventListener('click', function() {
                if (window.lastCalculationResult) {
                    saveToLocalStorage(
                        window.lastCalculationResult.formData,
                        window.lastCalculationResult.riskLevel,
                        window.lastCalculationResult.recommendations
                    );
                }
            });
            
            // ë‚´ì—­ ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('clearHistoryBtn').addEventListener('click', clearLocalStorage);
        });
        function getRecommendedWelfare(formData) {
            const recommendations = [];
            
            // ì†Œë“ ê¸°ë°˜ ì¶”ì²œ
            if (formData.income === 'basic') {
                recommendations.push(welfareDatabase.basic_living);
                recommendations.push(welfareDatabase.medical_support);
                recommendations.push(welfareDatabase.housing_support);
                recommendations.push(welfareDatabase.emergency_support);
            }
            
            if (formData.income === 'basic' || formData.income === 'low') {
                recommendations.push(welfareDatabase.basic_pension);
                recommendations.push(welfareDatabase.customized_care);
            }

            // ê±´ê°• ìƒíƒœ ê¸°ë°˜ ì¶”ì²œ
            if (formData.daily_living === 'dependent' || formData.daily_living === 'partial') {
                recommendations.push(welfareDatabase.long_term_care);
                recommendations.push(welfareDatabase.customized_care);
            }

            if (formData.chronic_disease === 'multiple' || formData.chronic_disease === 'some') {
                recommendations.push(welfareDatabase.home_healthcare);
                if (formData.medical_cost === 'severe' || formData.medical_cost === 'high') {
                    recommendations.push(welfareDatabase.medical_support);
                }
            }

            if (formData.mental_health === 'poor') {
                recommendations.push(welfareDatabase.dementia_center);
                recommendations.push(welfareDatabase.customized_care);
            }

            // ì‚¬íšŒì  ê´€ê³„ ê¸°ë°˜ ì¶”ì²œ
            if (formData.family === 'isolated') {
                recommendations.push(welfareDatabase.alone_elderly);
                recommendations.push(welfareDatabase.customized_care);
                recommendations.push(welfareDatabase.emergency_support);
            }

            if (formData.social_activity === 'none' || formData.social_activity === 'limited') {
                recommendations.push(welfareDatabase.social_program);
                if (formData.daily_living === 'independent') {
                    recommendations.push(welfareDatabase.senior_job);
                }
            }

            if (formData.emergency_support === 'none') {
                recommendations.push(welfareDatabase.alone_elderly);
                recommendations.push(welfareDatabase.emergency_support);
            }

            // ì£¼ê±° í™˜ê²½ ê¸°ë°˜ ì¶”ì²œ
            if (formData.housing_type === 'temporary') {
                recommendations.push(welfareDatabase.housing_support);
                recommendations.push(welfareDatabase.basic_living);
            }

            if (formData.housing_cost === 'excessive') {
                recommendations.push(welfareDatabase.housing_support);
            }

            if (formData.housing_safety === 'unsafe') {
                recommendations.push(welfareDatabase.housing_support);
                recommendations.push(welfareDatabase.emergency_support);
            }

            // ì—°ë ¹ ê¸°ë°˜ ì¶”ì²œ (ëª¨ë“  65ì„¸ ì´ìƒ)
            if (formData.age !== '65-69' || formData.age === '65-69') {
                if (!recommendations.some(r => r.name === 'ê¸°ì´ˆì—°ê¸ˆ')) {
                    recommendations.push(welfareDatabase.basic_pension);
                }
            }

            // ê±´ê°•í•œ ì–´ë¥´ì‹ ì„ ìœ„í•œ ì¶”ê°€ í”„ë¡œê·¸ë¨
            if (formData.daily_living === 'independent' && 
                formData.chronic_disease === 'none' && 
                formData.mental_health === 'good') {
                recommendations.push(welfareDatabase.lifelong_education);
                recommendations.push(welfareDatabase.volunteer_program);
            }

            // ì¤‘ë³µ ì œê±°
            const uniqueRecommendations = recommendations.filter((item, index, self) => 
                index === self.findIndex(t => t.name === item.name)
            );

            // ìš°ì„ ìˆœìœ„ë³„ ì •ë ¬
            const priorityOrder = { 'high': 3, 'medium': 2, 'low': 1 };
            return uniqueRecommendations.sort((a, b) => 
                priorityOrder[b.priority] - priorityOrder[a.priority]
            );
        }

        // ìœ„í—˜ë„ ê³„ì‚° í•¨ìˆ˜
        function calculateRiskLevel(formData) {
            let riskScore = 0;
            
            // ì†Œë“ ìœ„í—˜ë„
            if (formData.income === 'basic') riskScore += 4;
            else if (formData.income === 'low') riskScore += 3;
            else if (formData.income === 'medium-low') riskScore += 2;
            
            // ê±´ê°• ìœ„í—˜ë„
            if (formData.daily_living === 'dependent') riskScore += 4;
            else if (formData.daily_living === 'partial') riskScore += 2;
            
            if (formData.chronic_disease === 'multiple') riskScore += 3;
            else if (formData.chronic_disease === 'some') riskScore += 1;
            
            if (formData.mental_health === 'poor') riskScore += 3;
            else if (formData.mental_health === 'fair') riskScore += 1;
            
            // ì‚¬íšŒì  ìœ„í—˜ë„
            if (formData.family === 'isolated') riskScore += 3;
            else if (formData.family === 'limited') riskScore += 1;
            
            if (formData.social_activity === 'none') riskScore += 2;
            
            if (formData.emergency_support === 'none') riskScore += 3;
            else if (formData.emergency_support === 'limited') riskScore += 1;
            
            // ì£¼ê±° ìœ„í—˜ë„
            if (formData.housing_type === 'temporary') riskScore += 3;
            if (formData.housing_cost === 'excessive') riskScore += 2;
            if (formData.housing_safety === 'unsafe') riskScore += 2;
            
            if (riskScore >= 15) return 'critical';
            else if (riskScore >= 10) return 'high';
            else if (riskScore >= 5) return 'medium';
            else return 'low';
        }

        // í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('welfareForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = {};
            
            // í¼ ë°ì´í„° ìˆ˜ì§‘
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // í•„ìˆ˜ í•„ë“œ ê²€ì¦
            const requiredFields = ['age', 'region', 'income', 'medical_cost', 'pension', 
                                  'daily_living', 'chronic_disease', 'mental_health',
                                  'family', 'social_activity', 'emergency_support',
                                  'housing_type', 'housing_cost', 'housing_safety'];
            
            const missingFields = requiredFields.filter(field => !data[field]);
            
            if (missingFields.length > 0) {
                alert('ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ìœ„í—˜ë„ ê³„ì‚°
            const riskLevel = calculateRiskLevel(data);
            const recommendations = getRecommendedWelfare(data);
            
            // ì „ì—­ ë³€ìˆ˜ì— ê²°ê³¼ ì €ì¥ (ì €ì¥ ê¸°ëŠ¥ì„ ìœ„í•´)
            window.lastCalculationResult = {
                formData: data,
                riskLevel: riskLevel,
                recommendations: recommendations
            };
            
            // ê²°ê³¼ í‘œì‹œ
            displayResults(riskLevel, recommendations);
            
            // ì €ì¥ ë²„íŠ¼ í‘œì‹œ
            document.getElementById('saveResultBtn').style.display = 'inline-block';
            
            // ê²°ê³¼ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            document.getElementById('results').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        });

        function displayResults(riskLevel, recommendations) {
            const resultsDiv = document.getElementById('results');
            const riskLevelDiv = document.getElementById('riskLevel');
            const riskDescriptionDiv = document.getElementById('riskDescription');
            const recommendedWelfareDiv = document.getElementById('recommendedWelfare');
            
            // ìœ„í—˜ë„ë³„ ë©”ì‹œì§€ ì„¤ì •
            const riskMessages = {
                'critical': {
                    level: 'ğŸš¨ ê¸´ê¸‰ ì§€ì› í•„ìš”',
                    description: 'ë³µí•©ì ì¸ ì–´ë ¤ì›€ì„ ê²ªê³  ê³„ì‹­ë‹ˆë‹¤. ì¦‰ì‹œ ì „ë¬¸ ìƒë‹´ì„ ë°›ìœ¼ì‹œê¸° ë°”ëë‹ˆë‹¤.',
                    color: 'danger'
                },
                'high': {
                    level: 'âš ï¸ ë†’ì€ ìœ„í—˜ë„',
                    description: 'ì—¬ëŸ¬ ì˜ì—­ì—ì„œ ì§€ì›ì´ í•„ìš”í•©ë‹ˆë‹¤. ì ê·¹ì ì¸ ë³µì§€ ì„œë¹„ìŠ¤ ì´ìš©ì„ ê¶Œí•©ë‹ˆë‹¤.',
                    color: 'warning'
                },
                'medium': {
                    level: 'ğŸ”¶ ì¤‘ê°„ ìœ„í—˜ë„',
                    description: 'ì¼ë¶€ ì˜ì—­ì—ì„œ ì§€ì›ì´ ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.',
                    color: 'info'
                },
                'low': {
                    level: 'âœ… ì•ˆì •ì ',
                    description: 'ë¹„êµì  ì•ˆì •ì ì¸ ìƒíƒœì…ë‹ˆë‹¤. ì˜ˆë°©ì  ì„œë¹„ìŠ¤ ì´ìš©ì„ ê¶Œí•©ë‹ˆë‹¤.',
                    color: 'success'
                }
            };
            
            const riskInfo = riskMessages[riskLevel];
            riskLevelDiv.textContent = riskInfo.level;
            riskDescriptionDiv.textContent = riskInfo.description;
            
            // ì¶”ì²œ ë³µì§€ ì„œë¹„ìŠ¤ í‘œì‹œ
            recommendedWelfareDiv.innerHTML = '';
            
            if (recommendations.length === 0) {
                recommendedWelfareDiv.innerHTML = `
                    <div class="welfare-item">
                        <h5>ì¶”ì²œ ì„œë¹„ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</h5>
                        <p>í˜„ì¬ ìƒí™©ì—ì„œëŠ” íŠ¹ë³„í•œ ë³µì§€ ì„œë¹„ìŠ¤ê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. 
                        í•„ìš”ì‹œ ê°€ê¹Œìš´ ì£¼ë¯¼ì„¼í„°ì— ë¬¸ì˜í•´ì£¼ì„¸ìš”.</p>
                    </div>
                `;
            } else {
                recommendations.forEach((program, index) => {
                    const priorityClass = `priority-${program.priority}`;
                    const priorityText = {
                        'high': 'ğŸ”´ ìš°ì„  ì‹ ì²­',
                        'medium': 'ğŸŸ¡ ê¶Œì¥ ì„œë¹„ìŠ¤',
                        'low': 'ğŸŸ¢ ì°¸ê³  ì„œë¹„ìŠ¤'
                    };
                    
                    const programDiv = document.createElement('div');
                    programDiv.className = `welfare-item ${priorityClass}`;
                    programDiv.innerHTML = `
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="text-primary mb-1">${program.name}</h5>
                            <span class="badge bg-secondary">${priorityText[program.priority]}</span>
                        </div>
                        <p class="text-dark mb-2">${program.description}</p>
                        <div class="row">
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="bi-building me-1"></i><strong>ì‹ ì²­ì²˜:</strong> ${program.application}
                                </small>
                            </div>
                            <div class="col-md-6">
                                <small class="text-muted">
                                    <i class="bi-check-circle me-1"></i><strong>ì¡°ê±´:</strong> ${program.conditions.join(', ')}
                                </small>
                            </div>
                        </div>
                    `;
                    recommendedWelfareDiv.appendChild(programDiv);
                });
            }
            
            resultsDiv.style.display = 'block';
        }
    </script>
</body>
</html>
